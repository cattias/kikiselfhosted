{
    # Global options block
    log {
        output file /var/log/caddy/access.log
        format json
    }
}

:80, :443 {
    abort
}

# Fake public only internal shit
http://glances.vps.attias.io {
    bind 100.64.0.2
    reverse_proxy localhost:61208
}

http://headplane.attias.io {
    bind 100.64.0.2
    reverse_proxy localhost:3000
}

http://uptime.attias.io {
    bind 100.64.0.2
    reverse_proxy localhost:3001
}

http://hc.attias.io {
    reverse_proxy localhost:8000 {
        header_up X-Forwarded-Proto {header.X-Forwarded-Proto}
        header_up Host {host}
    }
}

# Real public shit
tailscale.attias.io {
    reverse_proxy localhost:8880
}

status.kikiflix.attias.io {
    reverse_proxy localhost:3001
}

plex.attias.io {
    reverse_proxy http://192.168.178.201:32400
}

photos.attias.io {
    reverse_proxy http://192.168.178.202:2283
}

overseerr.attias.io {
    reverse_proxy https://192.168.178.200:443 {
        transport http {
            tls_insecure_skip_verify
        }
    }
}
