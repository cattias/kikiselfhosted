apiVersion: argoproj.io/v1alpha1
kind: Application
metadata:
  name: paperless
  namespace: argocd
  finalizers:
  - resources-finalizer.argocd.argoproj.io
spec:
  syncPolicy:
    automated:
      prune: true
      enabled: true
  destination:
    namespace: paperless
    server: https://kubernetes.default.svc
  project: default
  source:
    repoURL: https://helm.crystalnet.org
    targetRevision: 0.2.22
    chart: paperless-ngx
    helm:
      valuesObject:
        service:
          type: NodePort
        config:
          paperless_url: "https://paperless.attias.io"
          auth:
            username: kiki
            email: kiki@attias.io
        persistence:
          data:
            enabled: true
            volumeClaimSpec:
              storageClass: local-path
              accessModes:
                - ReadWriteOnce
              resources:
                requests:
                  storage: 10Gi
          log:
            enabled: true
            volumeClaimSpec:
              storageClass: local-path
              accessModes:
                - ReadWriteOnce
              resources:
                requests:
                  storage: 1Gi